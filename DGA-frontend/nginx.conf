server {
    # Nginx จะรันที่พอร์ต 80 ภายใน Docker Container
    listen 80;

    # ชื่อเซิร์ฟเวอร์ (ไม่จำเป็นสำหรับ Docker แต่ใส่ไว้เพื่อความชัดเจน)
    server_name localhost; 

    # การตั้งค่าสำหรับไฟล์ Static
    location / {
        # 1. ระบุตำแหน่งไฟล์รากของเว็บ (ที่ Nginx เสิร์ฟจาก Stage 2 ใน Dockerfile)
        root /usr/share/nginx/html;
        
        # 2. ลำดับการหาไฟล์เมื่อมีการเรียก URL ราก (/)
        index index.html;
        
        # 3. **กฎสำคัญสำหรับ SPA (Single Page Application)**
        # ถ้าไฟล์หรือโฟลเดอร์ที่ร้องขอไม่พบจริง ๆ 
        # ให้ทำการส่ง Request กลับไปที่ /index.html เสมอ
        # เพื่อให้ JavaScript/React Router จัดการ Routing ต่อไป
        try_files $uri $uri/ /index.html;
    }

    # ป้องกันการแสดงไฟล์ที่ซ่อนอยู่ (Optional)
    location ~ /\. {
        deny all;
    }
}