version: '3.8'

services:
  # --- ไม่มี 'frontend' service แล้ว ---

  # --- Service เดียวที่รวมทุกอย่าง ---
  app: 
    build:
      context: . # ⭐️ Build จาก Root (ที่นี่)
      dockerfile: Dockerfile # ⭐️ โดยใช้ไฟล์ Dockerfile (ตัวใหม่นอกสุด)
    container_name: dga_app_combined
    restart: unless-stopped
    ports:
      # ⭐️ Map Port 1040 ของ Host ไปยัง 1040 ของ Container
      - "1040:1040"
    env_file:
      # ⭐️ ยังคงดึง .env จาก DGA-back
      - ./DGA-back/.env